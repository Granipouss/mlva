{% extends "layout/base.twig" %}

{% block title %}Edit a database | {{db.name}}{% endblock %}
{% set menu = "databases" %}

{% block content %}
	<div class="row section-home-grey padding-top-30 padding-bottom-30"><div class="container">
		{% include 'layout/info_messages.twig'%}
		<div class="title-border blue">
			<div class="btn-group pull-right" role="group" aria-label="...">
				<button type="button" class="btn btn-default" onclick="document.location = '{{base_url('databases/' ~ db.id)}}';">View</button>
				<button type="button" class="btn btn-default" onclick="document.location = '{{base_url('databases/export')}}/{{ db.id }}';">Export</button>
			</div>
			<h3 class="blue">{{ db.name }}</h3>
		</div>
		<div class="row">
			<div class="col-xs-12">
				{{ form_open('databases/edit/' ~ db.id) }}
					{{forms.input('name', 'Database Name', 'Database Name', db.name, 'text')}}
					<div class="form-group">
						<label for="group">Database Type</label>
						<select class="form-control" name="group" id="group">
							{% if db.user_id == session.user.id %}
								<option value="-1">Personal</option>
							{% endif %}
							{% for group in session.groups %}
								{% if db.group_id == group.id %}
									<option selected value="{{ group.id }}">{{ group.name }}</option>
									{% else %}
									<option value="{{ group.id }}">{{ group.name }}</option>
								{% endif %}
							{% endfor %}
						</select>
					</div>
					<div class="form-group">
						{{forms.checkbox(db.state, "public", "Is that database public ?")}}
					</div>
					<button type="submit" class="btn btn-default">Edit</button>
				{{ form_close() }}
			</div>
		</div>
	</div></div>
{% endblock %}
