{% extends "layout/base.twig" %}

{% block title %}View {{ base.name }}{% endblock %}
{% set menu = "databases" %}

{% block content %}
<div class="row"><div class="col-sm-12">

	{% include "databases/inc/header.twig" with { 'mode': 'short' } %}

</div></div>
</div>

<div class="database">	
	<table id="strain-list" class="tablesorter table table-condensed database">
		<thead><tr>
			<th>Name</th>
			{% for data in base.data %}
				<th class="marker">{{ data }}</th>
			{% endfor %}
			<th></th>
		</tr></thead>
		<tbody>
			{% for panel in panels %}
				<tr>{{ form_open('databases/editPanels/' ~ base.id) }}
					<td><input class="form-control" name="name" placeholder="New Panel" value="{{ panel.name }}" type="text" /></td>
					{% for data in base.data %}
						<td><input type="checkbox" name="data[]" value="{{ data }}" {% if data in panel.data %} checked {% endif %} /></td>
					{% endfor %}
					<td>
						<input type="hidden"  name="id"  value="{{ panel.id }}" />
						<button type="submit" class="btn btn-default" name="action" value="Update">Update</button>
						<button type="submit" class="btn btn-default" name="action" value="Generate">Generate Geno Num</button>
						<button type="submit" class="btn btn-default" name="action" value="Delete">Delete</button>
					</td>
				{{ form_close() }}</tr>
			{% endfor %}
			<tr>{{ form_open('databases/editPanels/' ~ base.id) }}
				<td><input class="form-control" name="name" placeholder="New Panel" value="" type="text" /></td>
				{% for data in base.data %}
					<td><input type="checkbox" name="data[]" value="{{ data }}" /></td>
				{% endfor %}
				<td>
					<input type="hidden"  name="id"  value="-1" />
					<button type="submit" class="btn btn-default">Submit</button>
				</td>
			{{ form_close() }}</tr>
		</tbody>
	</table>
</div>

<div class="container">
{% endblock %}

{% block footer_js %}
{{ parent () }}
<script src="{{ base_url('dist/js/jquery.tablesorter.min.js') }}"></script>
<script>
	$(document).ready(function() {
        $("#strain-list").tablesorter({
			theme: 'blue',
			headerTemplate: '{content} <small>{icon}</small>',
			// cssIcon: 'glyphicon',
			// cssIconNone: 'glyphicon-triangle-right',
			// cssIconAsc: 'glyphicon-triangle-up',
			// cssIconDesc: 'glyphicon glyphicon-triangle-down',
			headers : {
				'.marker'   : { sorter: false }
			}
		});
    });
</script>
{% endblock %}
